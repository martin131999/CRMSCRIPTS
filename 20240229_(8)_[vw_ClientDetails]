
CREATE or alter VIEW [dbo].[vw_ClientDetails] AS   
select a.id,  
      a.FileNumber,  
     a.Category,  
     a.Fname,  
      a.Sname,  
      a.Lname,  
      a.DOB,  
      a.ContactName,  
      a.EmailID,  
      a.Source,  
      a.Profession,  
      a.TotExperience,  
     a.CountryInterested,  
     a.OtherCountryIntersted,  
     a.processaus,  
     a.processcanada,  
     a.NocCode,  
     a.ANZCO,  
     a.remarkscan,  
      a.remarksaus,  
      a.cutoffcan,  
      a.cutoffaus,  
     a.appointmentDate,  
     a.Remarks,  
     a.RemarksClients,  
     a.mailSend,  
     a.appointmenttime,  
      a.AssignedEmp,  
      a.AssesmentResultCAN,  
      a.AssesmentResultAUS,  
      a.Education,  
      a.FollowupStatus,  
      a.RetainedDate,  
      a.Lead,  
      a.Applicant,  
      a.Client,  
      a.Retained,  
     a.createdt,  
      a.prospect,  
       a.IDApproval,  
      a.paymentApproval,  
      b.srcname,  
      c.prname,  
      d.edName,  
      e.paymentPlan,  
      e.RetainerAmount,  
      e.Discount,  
      e.ProfesionalFeeAmt,  
      e.paymentMode,  
      e.RetStat,  
      e.ProfStat,  
      e.Cancelreasonrct,  
      e.Cancelreasonprof,  
      e.Amount,  
      e.narration,  
      e.ProfDiscount,  
      e.ProfNetAmount,  
      e.bnkdepositDate,  
      e.partialpay,  
      f.SAKdtae,  
      f.SAFdate,  
      f.EOIfileDate,  
      f.CaseFileDate,  
      f.selectionDate,  
      f.VisaDate,  
      f.Visa,  
      g.pmode,  
      h.cName,  
       i.Branch,  
       i.EmpName,  
       i.Currency,  
       j.curcode,  
       j.curname,  
       k.BranchName,  
         a.createid,  
         l.EmpName createdname, 
a.modid,  
a.moddate,a.Address,a.PNP_OIDApproval,a.PNP_OIDApprovedBy,Na.CountryName
         
      from tblApplicant a left join tblSource b on a.source=b.srcid   
      left join tblProfession c on a.Profession=c.prid   
      left join tblEducation1 d on a.Education=d.edid  
      left join tblClientpaymentplan e on a.FileNumber=e.fileNumber   
      left join tblDateFiling f on a.FileNumber=f.filenumber  
       left join tblCountry h on a.CountryInterested=h.cid  
      left join tblPaymentMode g on e.paymentMode=g.pid  
       left join tblEmployee i on a.AssignedEmp=i.EmpID  
        left join tblEmployee l on a.createid=l.EmpID  
       left join tblBranch k on i.Branch=k.id  
	   left join tblNationality Na on a.ANZCO =CAST(Na.Country_ID as nvarchar)
      left join tblCurrency j on i.Currency=j.curid where a.Client='1'  
  
